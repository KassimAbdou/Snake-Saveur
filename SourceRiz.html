<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg+xml" href="favicon-chef.svg">
    <link rel="icon" href="favicon-chef.svg">
    <link rel="icon" href="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><rect width='64' height='64' rx='8' fill='darkgreen'/><g transform='translate(6,6) scale(0.875)'><path d='M24 2C18 2 14 6 12 10c-6 2-8 8-6 14 2 6 8 10 18 10s16-4 18-10c2-6 0-12-6-14-2-4-6-8-12-8z' fill='white'/><path d='M10 30c0 6 10 12 14 12s14-6 14-12v-2H10v2z' fill='gold'/></g></svg>">
  <title>Sélection de Plats</title>

  <style>
    :root{
      --ocean:#0ea5a4;
      --sun:#f59e0b;
      --sand:#fff7e0;
      --dark:#1f2933;
      --glass:rgba(255,255,255,.18);
    }

    *{
      box-sizing:border-box;
    }

    body{
      font-family:'Poppins',sans-serif;
      background:
        linear-gradient(180deg, rgba(14,165,164,.35), rgba(245,158,11,.15)),
        url('background-anjouan.jpg');
      background-size:cover;
      background-attachment:fixed;
      margin:0;
      padding:30px 15px;
      color:#1f2933;
    }

    /* --- Retour --- */
    .back{
      text-decoration:none;
      color:var(--ocean);
      font-weight:600;
      font-size:.95em;
    }

    h1{
      text-align:center;
      margin:20px 0 40px;
      font-size:2.3em;
      color:#064e4a;
      text-shadow:0 2px 8px rgba(0,0,0,.15);
    }

    /* --- Menu --- */
    .menu{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:30px;
      max-width:1100px;
      margin:0 auto;
    }

    .menu-item{
      background:var(--glass);
      backdrop-filter:blur(12px);
      border-radius:20px;
      overflow:hidden;
      cursor:pointer;
      padding-bottom:15px;
      box-shadow:0 15px 35px rgba(0,0,0,.15);
      transition:.35s ease;
      text-align:center;
    }

    .menu-item:hover{
      transform:translateY(-6px) scale(1.02);
    }

    .menu-item.selected{
      outline:3px solid var(--sun);
      transform:scale(1.05);
    }

    .menu-item img{
      width:100%;
      height:170px;
      object-fit:cover;
    }

    .menu-item h3{
      margin:12px 0 4px;
      color:#083344;
    }

    .menu-item span{
      display:block;
      font-weight:700;
      color:var(--sun);
      margin-bottom:8px;
    }

    .qty-input{
      width:70px;
      padding:6px;
      border-radius:12px;
      border:1px solid #ddd;
      display:none;
      margin:0 auto;
      text-align:center;
    }

    /* --- Total --- */
    .total{
      text-align:center;
      font-size:1.4em;
      font-weight:700;
      margin:35px 0 20px;
      color:#064e4a;
    }

    /* --- Bouton --- */
    button{
      display:block;
      margin:0 auto;
      padding:14px 36px;
      border:none;
      border-radius:30px;
      background:linear-gradient(135deg,var(--sun),#d97706);
      color:white;
      font-size:1em;
      font-weight:600;
      cursor:pointer;
      box-shadow:0 10px 25px rgba(0,0,0,.25);
      transition:.3s;
    }

    button:hover{
      transform:scale(1.05);
      box-shadow:0 15px 35px rgba(0,0,0,.35);
    }

    /* --- Mobile --- */
    @media (max-width:600px){
      h1{ font-size:1.7em; }
      .menu-item img{ height:140px; }
    }
  </style>
</head>

<body>

  <div>
    <strong><h3><a href="index.html" class="back">← Page d'accueil</a></h3></strong>
  </div>

  <h1>Choisissez vos plats</h1>

  <div class="menu">
    <div class="menu-item" data-prix="3000">
      <img src="WhatsApp%20Image%202025-10-23%20%C3%A0%2003.26.42_220a171b.jpg" alt="Pilau avec Poulet">
      <h3>Pilau avec Poulet</h3>
      <span>3000fr</span>
    </div>

    <div class="menu-item" data-prix="2500">
      <img src="WhatsApp%20Image%202025-10-23%20%C3%A0%2003.26.42_e9628a58.jpg" alt="Riz, Viande et Lait Caillé">
      <h3>Riz, Viande et Lait Caillé</h3>
      <span>2500fr</span>
    </div>

    <div class="menu-item" data-prix="3500">
      <img src="WhatsApp%20Image%202025-10-23%20%C3%A0%2003.26.41_a45eec5e.jpg" alt="Riz, Mataba, Poulet et Nshari">
      <h3>Riz, Mataba, Poulet et Nshari</h3>
      <span>3500fr</span>
    </div>

    <div class="menu-item" data-prix="3500">
      <img src="WhatsApp%20Image%202025-10-23%20%C3%A0%2001.33.52_33921e01.jpg" alt="Riz, Poisson, Mataba et Nshari">
      <h3>Riz, Poisson, Mataba et Nshari</h3>
      <span>3500fr</span>
    </div>
  </div>

  <div class="total">Total : 0fr</div>
  <button onclick="valider()">Valider la commande</button>

  <!-- JS STRICTEMENT IDENTIQUE -->
  <script>
    const WHATSAPP_NUMBER = '255793977456';
    const items = document.querySelectorAll('.menu-item');
    const totalEl = document.querySelector('.total');

    items.forEach(item => {
      const qty = document.createElement('input');
      qty.type='number'; qty.min='1'; qty.value='1'; qty.className='qty-input';
      item.appendChild(qty);

      item.addEventListener('click', (e)=>{
        if (e.target === qty) return;
        item.classList.toggle('selected');
        qty.style.display = item.classList.contains('selected') ? 'block' : 'none';
        if (!item.classList.contains('selected')) qty.value='1';
        updateTotal();
      });

      qty.addEventListener('input', ()=>{ if (item.classList.contains('selected')) updateTotal(); });
    });

    function updateTotal(){
      let total=0;
      items.forEach(item=>{
        if (item.classList.contains('selected')){
          const unit=parseFloat(item.dataset.prix)||0;
          const q=parseInt(item.querySelector('.qty-input').value)||1;
          total += unit*q;
        }
      });
      totalEl.textContent = `Total : ${total}fr`;
    }

    function valider(){
      const commande=[];
      items.forEach(item=>{
        if (item.classList.contains('selected')){
          const name=item.querySelector('h3').textContent.trim();
          const unit=parseFloat(item.dataset.prix)||0;
          const q=parseInt(item.querySelector('.qty-input').value)||1;
          commande.push(`${name} x${q} - ${unit*q}fr`);
        }
      });

      if (commande.length===0){
        alert("Vous n'avez sélectionné aucun plat !");
        return;
      }

      const messageLines=[
        'Commande Saveur Comorienne :',
        '---------------------------',
        ...commande,
        '---------------------------',
        totalEl.textContent
      ];

      const message = messageLines.join('\n');
      const waUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(message)}`;
      window.open(waUrl,'_blank');

      items.forEach(item=>{
        item.classList.remove('selected');
        const q=item.querySelector('.qty-input');
        if (q){ q.value='1'; q.style.display='none'; }
      });
      updateTotal();
    }
  </script>

</body>
</html>